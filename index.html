<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Job Management</title>
  <!-- Add Bootstrap CSS link -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Add DataTables CSS link -->
  <link href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h2>Upload Data</h2>
        <br/>
        <!-- Job Submission Form -->
        <form id="jobForm" enctype="multipart/form-data">
            <div class="row">
                <div class="col-md-3 mb-1">
                    <button class="btn btn-primary" onclick="openCSVFile()" id="uploadButton"> <i class="fas fa-upload"></i> Upload & validate CSV</button>
                </div>
                <div class="col-md-3 mb-1" id="validationResults"><p>0 Lines Validated</p></div>
                <div class="col-md-3 mb-3">
                    <select class="form-select" id="data-source">
                        <option value="glassdoor_reviews">Glassdoor Reviews</option>
                        <option value="googleplay_reviews">Googleplay Reviews</option>
                        <option value="linkedin_company">Linkedin Company</option>
                        <option value="linkedin_people">Linkedin People</option>
                        <option value="indeed">Indeed</option>
                        <option value="ambitionbox">Ambitionbox</option>
                        <option value="appstore">AppStore</option>
                        <option value="crunchbase">CrunchBase</option>
                        <option value="semrush">Semrush</option>
                        <option value="digital_presence">Digital Presence</option>
                    </select>
                </div>
                <div class="col-md-3 mb-3">
                    <button type="submit" class="btn btn-primary">Upload</button>
                </div>
            </div>
        </form>
    
        <!-- Job Status Table -->
        <h3 class="mt-4"></h3>
        <table class="table" id="jobStatusTable" class="table table-striped table-bordered" style="width:100%">
            <thead>
            <tr>
                <th>ID</th>
                <th>File Name</th>
                <th>Data Source</th>
                <th>Status</th>
                <th>Total Records</th>
                <th>Raw File</th>
                <th>Remaining Data</th>
                <th>Error File</th>
                <th>Created At</th>
            </tr>
            </thead>
            <tbody id="jobTableBody" >
            <!-- Table rows will be dynamically added here using JavaScript -->
            </tbody>
        </table>
    </div>

  <!-- Add Bootstrap JS scripts -->
   <!-- Add Bootstrap JS scripts -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
   <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
   <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
   <script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
  <script>
    // Access ipcRenderer using window.electron.ipcRenderer
    const ipcRenderer = window.electron.ipcRenderer;
  
    function openCSVFile() {
      ipcRenderer.send('open-csv-file');
    }
    console.log(ipcRenderer);
    console.log(window.electron);
    window.electron.handleCounter((event, value) => {
        document.getElementById('validationResults').innerHTML = value+" Lines Validated";
    })

  </script>
  
</body>
</html>
